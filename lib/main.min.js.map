{"version":3,"file":"main.min.js","sources":["../src/storage/SessionStorageFake.ts","../src/events/StorageFlushing.ts","../src/events/StorageFlushed.ts","../src/events/RetrievingKey.ts","../src/events/KeyHit.ts","../src/events/KeyMissed.ts","../src/events/KeyWriteFailed.ts","../src/events/KeyWritten.ts","../src/events/WritingKey.ts","../src/events/KeyForgotten.ts","../src/events/KeyForgotFailed.ts","../src/storage/SessionStorage.ts"],"sourcesContent":["export class SessionStorageFake implements Storage {\n    /**\n     * Current used storage in bytes.\n     *\n     * @type { number }\n     */\n    #used: number = 0;\n\n    /**\n     * Maximum storage quota (5MB for most modern browsers).\n     *\n     * @type { number }\n     */\n    #quota: number = 5 * 1024 * 1024;\n\n    /**\n     * Storage property.\n     *\n     * @type { string }\n     */\n    [key: string]: any;\n\n    /**\n     * Create a new Storage instance.\n     */\n    constructor() {\n        this.#used = this.space();\n    }\n\n    /**\n     * Returns an integer representing the number of data items stored in the Storage object.\n     *\n     * @return { number }\n     */\n    get length(): number {\n        return Object.keys(this).length;\n    }\n\n    /**\n     * When passed a key name, will return that key's value.\n     *\n     * @param { string } keyName\n     *\n     * @return { any }\n     */\n    getItem(keyName: string): string {\n        return this[keyName] || null;\n    }\n\n    /**\n     * When passed a key name and value, will add that key to the storage, or update that key's value if it already exists.\n     *\n     * @param { string } keyName\n     * @param { string } keyValue\n     *\n     * @return { void }\n     */\n    setItem(keyName: string, keyValue: string): void {\n        const value: string = String(keyValue);\n\n        if (this.exceeded(keyName, value)) {\n            this.throw(keyName);\n        }\n\n        this[keyName] = value;\n\n        this.#used = this.space();\n    }\n\n    /**\n     * When passed a key name, will remove that key from the storage.\n     *\n     * @param { string } keyName\n     *\n     * @return { void }\n     */\n    removeItem(keyName: string): void {\n        delete this[keyName];\n\n        this.#used = this.space();\n    }\n\n    /**\n     * When invoked, will empty all keys out of the storage.\n     *\n     * @return { void }\n     */\n    clear(): void {\n        for (const key of Object.keys(this)) {\n            delete this[key];\n        }\n\n        this.#used = this.space();\n    }\n\n    /**\n     * When passed a number n, returns the name of the nth key in a given Storage object.\n     *\n     * @param { number } index\n     *\n     * @return { string | null }\n     */\n    key(index: number): string | null {\n        return Object.keys(this)[index] ?? null;\n    }\n\n    /**\n     * Calculate current used storage space in bytes.\n     *\n     * @return { number }\n     */\n    private space(): number {\n        this.#used = 0;\n\n        for (const key of Object.keys(this)) {\n            this.#used += this.size(key, this[key]);\n        }\n\n        return this.#used;\n    }\n\n    /**\n     * Calculate the size a new item would take in bytes.\n     *\n     * @param { string } keyName\n     * @param { string } keyValue\n     *\n     * @return { number }\n     */\n    private size(keyName: string, keyValue: string): number {\n        return new Blob([keyName, keyValue]).size;\n    }\n\n    /**\n     * Determine if the Storage quota is exceeded.\n     *\n     * @param { string } keyName\n     * @param { string } keyValue\n     *\n     * @return { boolean }\n     */\n    private exceeded(keyName: string, keyValue: string): boolean {\n        return this.size(keyName, keyValue) + this.#used > this.#quota;\n    }\n\n    /**\n     * Throws an error in case the Storage quota is exceeded.\n     *\n     * @param { string } keyName\n     *\n     * @return { void }\n     */\n    private throw(keyName: string): void {\n        throw new DOMException(`Failed to execute 'setItem' on 'Storage': Setting the value of '${keyName}' exceeded the quota.`, 'QuotaExceededError');\n    }\n}","export class StorageFlushing extends Event {\r\n    /**\r\n     * The key of the event.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #key: string;\r\n\r\n    /**\r\n     * Create a new Storage Flushing Event instance.\r\n     */\r\n    constructor() {\r\n        super('session-storage:flushing');\r\n    }\r\n\r\n    /**\r\n     * Get the key of the event.\r\n     *\r\n     * @return { string }\r\n     */\r\n    get key(): string {\r\n        return this.#key;\r\n    }\r\n}","export class StorageFlushed extends Event {\r\n    /**\r\n     * The key of the event.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #key: string;\r\n\r\n    /**\r\n     * Create a new Storage Flushed Event instance.\r\n     */\r\n    constructor() {\r\n        super('session-storage:flushed');\r\n    }\r\n\r\n    /**\r\n     * Get the key of the event.\r\n     *\r\n     * @return { string }\r\n     */\r\n    get key(): string {\r\n        return this.#key;\r\n    }\r\n}","export class RetrievingKey extends Event {\r\n    /**\r\n     * The key of the event.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #key: string;\r\n\r\n    /**\r\n     * Create a new Retrieving Key Event instance.\r\n     *\r\n     * @param { string } key\r\n     */\r\n    constructor(key: string) {\r\n        super('session-storage:retrieving');\r\n\r\n        this.#key = key;\r\n    }\r\n\r\n    /**\r\n     * Get the key of the event.\r\n     *\r\n     * @return { string }\r\n     */\r\n    get key(): string {\r\n        return this.#key;\r\n    }\r\n}","export class KeyHit extends Event {\r\n    /**\r\n     * The key of the event.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #key: string;\r\n\r\n    /**\r\n     * The value of the key.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #value: string;\r\n\r\n    /**\r\n     * Create a new Key Hit Event instance.\r\n     *\r\n     * @param { string } key\r\n     * @param { string } value\r\n     */\r\n    constructor(key: string, value: any) {\r\n        super('session-storage:hit');\r\n\r\n        this.#key = key;\r\n        this.#value = value;\r\n    }\r\n\r\n    /**\r\n     * Get the key of the event.\r\n     *\r\n     * @return { string }\r\n     */\r\n    get key(): string {\r\n        return this.#key;\r\n    }\r\n\r\n    /**\r\n     * Get the value of the key.\r\n     *\r\n     * @return { * }\r\n     */\r\n    get value(): any {\r\n        return this.#value;\r\n    }\r\n}","export class KeyMissed extends Event {\r\n    /**\r\n     * The key of the event.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #key: string;\r\n\r\n    /**\r\n     * Create a new Key Missed Event instance.\r\n     *\r\n     * @param { string } key\r\n     */\r\n    constructor(key: string) {\r\n        super('session-storage:missed');\r\n\r\n        this.#key = key;\r\n    }\r\n\r\n    /**\r\n     * Get the key of the event.\r\n     *\r\n     * @return { string }\r\n     */\r\n    get key(): string {\r\n        return this.#key;\r\n    }\r\n}","export class KeyWriteFailed extends Event {\r\n    /**\r\n     * The key of the event.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #key: string;\r\n\r\n    /**\r\n     * The value of the key.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #value: string;\r\n\r\n    /**\r\n     * Create a new Key Write Failed Event instance.\r\n     *\r\n     * @param { string } key\r\n     * @param { string } value\r\n     */\r\n    constructor(key: string, value: any) {\r\n        super('session-storage:write-failed');\r\n\r\n        this.#key = key;\r\n        this.#value = value;\r\n    }\r\n\r\n    /**\r\n     * Get the key of the event.\r\n     *\r\n     * @return { string }\r\n     */\r\n    get key(): string {\r\n        return this.#key;\r\n    }\r\n\r\n    /**\r\n     * Get the value of the key.\r\n     *\r\n     * @return { * }\r\n     */\r\n    get value(): any {\r\n        return this.#value;\r\n    }\r\n}","export class KeyWritten extends Event {\r\n    /**\r\n     * The key of the event.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #key: string;\r\n\r\n    /**\r\n     * The value of the key.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #value: string;\r\n\r\n    /**\r\n     * Create a new Key Written Event instance.\r\n     *\r\n     * @param { string } key\r\n     * @param { string } value\r\n     */\r\n    constructor(key: string, value: any) {\r\n        super('session-storage:written');\r\n\r\n        this.#key = key;\r\n        this.#value = value;\r\n    }\r\n\r\n    /**\r\n     * Get the key of the event.\r\n     *\r\n     * @return { string }\r\n     */\r\n    get key(): string {\r\n        return this.#key;\r\n    }\r\n\r\n    /**\r\n     * Get the value of the key.\r\n     *\r\n     * @return { * }\r\n     */\r\n    get value(): any {\r\n        return this.#value;\r\n    }\r\n}","export class WritingKey extends Event {\r\n    /**\r\n     * The key of the event.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #key: string;\r\n\r\n    /**\r\n     * The value of the key.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #value: string;\r\n\r\n    /**\r\n     * Create a new Writing Key Event instance.\r\n     *\r\n     * @param { string } key\r\n     * @param { string } value\r\n     */\r\n    constructor(key: string, value: any) {\r\n        super('session-storage:writing');\r\n\r\n        this.#key = key;\r\n        this.#value = value;\r\n    }\r\n\r\n    /**\r\n     * Get the key of the event.\r\n     *\r\n     * @return { string }\r\n     */\r\n    get key(): string {\r\n        return this.#key;\r\n    }\r\n\r\n    /**\r\n     * Get the value of the key.\r\n     *\r\n     * @return { * }\r\n     */\r\n    get value(): any {\r\n        return this.#value;\r\n    }\r\n}","export class KeyForgotten extends Event {\r\n    /**\r\n     * The key of the event.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #key: string;\r\n\r\n    /**\r\n     * Create a new Key Forgotten Event instance.\r\n     *\r\n     * @param { string } key\r\n     */\r\n    constructor(key: string) {\r\n        super('session-storage:forgot');\r\n\r\n        this.#key = key;\r\n    }\r\n\r\n    /**\r\n     * Get the key of the event.\r\n     *\r\n     * @return { string }\r\n     */\r\n    get key(): string {\r\n        return this.#key;\r\n    }\r\n}","export class KeyForgotFailed extends Event {\r\n    /**\r\n     * The key of the event.\r\n     *\r\n     * @type { string }\r\n     */\r\n    readonly #key: string;\r\n\r\n    /**\r\n     * Create a new Key Forgot Failed Event instance.\r\n     *\r\n     * @param { string } key\r\n     */\r\n    constructor(key: string) {\r\n        super('session-storage:forgot-failed');\r\n\r\n        this.#key = key;\r\n    }\r\n\r\n    /**\r\n     * Get the key of the event.\r\n     *\r\n     * @return { string }\r\n     */\r\n    get key(): string {\r\n        return this.#key;\r\n    }\r\n}","import { SessionStorageFake } from './SessionStorageFake';\nimport {\n    KeyForgotFailed,\n    KeyForgotten,\n    KeyHit,\n    KeyMissed,\n    KeyWriteFailed,\n    KeyWritten,\n    RetrievingKey,\n    type SessionStorageEvent,\n    type SessionStorageEventListener,\n    type SessionStorageEvents,\n    StorageFlushed,\n    StorageFlushing,\n    WritingKey,\n} from '../events';\n\nexport type SessionStorageItem = {\n    data: any,\n};\n\nexport class SessionStorage {\n    /**\n     * Current Storage instance.\n     *\n     * @type { Storage }\n     */\n    static #storage: Storage = sessionStorage;\n\n    /**\n     * Set the key to the Storage object.\n     *\n     * @param { string } key\n     * @param { * } value\n     *\n     * @return { boolean }\n     */\n    static set(key: string, value: any): boolean {\n        const item: SessionStorageItem = {\n            data: typeof value === 'function' ? value() : value,\n        };\n\n        this.emit(new WritingKey(key, item.data));\n\n        try {\n            this.#storage.setItem(key, JSON.stringify(item));\n\n            this.emit(new KeyWritten(key, item.data));\n        } catch {\n            this.emit(new KeyWriteFailed(key, item.data));\n\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Get the key from the Storage object.\n     *\n     * @param { string } key\n     * @param { string | Function | null } fallback\n     *\n     * @return { * }\n     */\n    static get(key: string, fallback: string | Function | null = null): any {\n        this.emit(new RetrievingKey(key));\n\n        const storageItem: string | null = this.#storage.getItem(key);\n\n        if (storageItem === null) {\n            this.emit(new KeyMissed(key));\n\n            return typeof fallback === 'function' ? fallback() : fallback;\n        }\n\n        let value: any;\n\n        try {\n            const item: SessionStorageItem = JSON.parse(storageItem);\n\n            value = item.data ?? item;\n        } catch {\n            value = storageItem;\n        }\n\n        this.emit(new KeyHit(key, value));\n\n        return value;\n    }\n\n    /**\n     * Get the key from the Storage, or execute the given callback and store the result.\n     *\n     * @param { string } key\n     * @param { Function } callback\n     *\n     * @return { any }\n     */\n    static remember(key: string, callback: Function): any {\n        const item: string | null = this.get(key);\n\n        if (item === null) {\n            this.set(key, callback);\n        }\n\n        return item ?? this.get(key);\n    }\n\n    /**\n     * Retrieves all items from the Storage object.\n     *\n     * @return { { key: string, value: any }[] }\n     */\n    static all(): { key: string, value: any }[] {\n        return this.keys().map((key: string): { key: string, value: any } => {\n            return { key, value: this.get(key) };\n        });\n    }\n\n    /**\n     * Remove the key from the Storage object.\n     *\n     * @param { string } key\n     *\n     * @return { boolean }\n     */\n    static remove(key: string): boolean {\n        if (this.has(key)) {\n            this.#storage.removeItem(key);\n\n            this.emit(new KeyForgotten(key));\n\n            return true;\n        } else {\n            this.emit(new KeyForgotFailed(key));\n\n            return false;\n        }\n    }\n\n    /**\n     * Clear all keys stored in a given Storage object.\n     *\n     * @return { void }\n     */\n    static clear(): void {\n        this.emit(new StorageFlushing());\n\n        this.#storage.clear();\n\n        this.emit(new StorageFlushed());\n    }\n\n    /**\n     * Determine if the key exists in the Storage object.\n     *\n     * @param { string } key\n     *\n     * @return { boolean }\n     */\n    static has(key: string): boolean {\n        return !!this.get(key);\n    }\n\n    /**\n     * Determine if the key does not exist in the Storage object.\n     *\n     * @param { string } key\n     *\n     * @return { boolean }\n     */\n    static missing(key: string): boolean {\n        return !this.has(key);\n    }\n\n    /**\n     * Determine if any of the keys exists in the Storage object.\n     *\n     * @param { string | string[] } keys\n     *\n     * @return { boolean }\n     */\n    static hasAny(...keys: [string | string[]] | string[]): boolean {\n        if (keys.length === 1) {\n            if (Array.isArray(keys[0])) {\n                keys = keys[0];\n            } else {\n                keys = [keys[0]];\n            }\n        }\n\n        return keys.some((key: string): boolean => this.has(key));\n    }\n\n    /**\n     * Determine if the Storage object is empty.\n     *\n     * @return { boolean }\n     */\n    static isEmpty(): boolean {\n        return this.#storage.length === 0;\n    }\n\n    /**\n     * Determine if the Storage object is not empty.\n     *\n     * @return { boolean }\n     */\n    static isNotEmpty(): boolean {\n        return !this.isEmpty();\n    }\n\n    /**\n     * Retrieves all keys from the Storage object.\n     *\n     * @return { string[] }\n     */\n    static keys(): string[] {\n        return Object.keys(this.#storage);\n    }\n\n    /**\n     * Returns the total number of items in the Storage object.\n     *\n     * @return { number }\n     */\n    static count(): number {\n        return this.#storage.length;\n    }\n\n    /**\n     * Dump the key from the Storage object.\n     *\n     * @param { string } key\n     */\n    static dump(key: string): void {\n        console.log(this.get(key));\n    }\n\n\n    /**\n     * Replace the Session Storage instance with a fake.\n     *\n     * @return { void }\n     */\n    static fake(): void {\n        this.#storage = new SessionStorageFake();\n    }\n\n    /**\n     * Restore the Session Storage instance.\n     *\n     * @return { void }\n     */\n    static restore(): void {\n        this.#storage = sessionStorage;\n    }\n\n    /**\n     * Determines whether a \"fake\" has been set as the Session Storage instance.\n     *\n     * @return { boolean }\n     */\n    static isFake(): boolean {\n        return this.#storage instanceof SessionStorageFake;\n    }\n\n    /**\n     * Register an event listener.\n     *\n     * @template { keyof SessionStorageEvents } K\n     *\n     * @param { K | SessionStorageEvents } events\n     * @param { SessionStorageEventListener<K> | null } listener\n     *\n     * @return { void }\n     */\n    static listen(events: 'retrieving', listener: (event: RetrievingKey) => void): void;\n    static listen(events: 'hit', listener: (event: KeyHit) => void): void;\n    static listen(events: 'missed', listener: (event: KeyMissed) => void): void;\n    static listen(events: 'writing', listener: (event: WritingKey) => void): void;\n    static listen(events: 'written', listener: (event: KeyWritten) => void): void;\n    static listen(events: 'write-failed', listener: (event: KeyWriteFailed) => void): void;\n    static listen(events: 'forgot', listener: (event: KeyForgotten) => void): void;\n    static listen(events: 'forgot-failed', listener: (event: KeyForgotFailed) => void): void;\n    static listen(events: 'flushing', listener: (event: StorageFlushing) => void): void;\n    static listen(events: 'flushed', listener: (event: StorageFlushed) => void): void;\n    static listen(events: SessionStorageEvents): void;\n    static listen<K extends keyof SessionStorageEvent>(events: keyof SessionStorageEvent | SessionStorageEvents, listener: SessionStorageEventListener<K> | null = null): void {\n        events = typeof events === 'string' ? { [events]: listener } : events;\n\n        for (const [event, listener] of Object.entries(events)) {\n            addEventListener(`session-storage:${event}`, listener as EventListener, { once: true });\n        }\n    }\n\n    /**\n     * Register a listener on \"retrieving\" event.\n     *\n     * @param { (event: RetrievingKey) => void } listener\n     *\n     * @return { void }\n     */\n    static onRetrieving(listener: (event: RetrievingKey) => void): void {\n        this.listen('retrieving', listener);\n    }\n\n    /**\n     * Register a listener on \"hit\" event.\n     *\n     * @param { (event: KeyHit) => void } listener\n     *\n     * @return { void }\n     */\n    static onHit(listener: (event: KeyHit) => void): void {\n        this.listen('hit', listener);\n    }\n\n    /**\n     * Register a listener on \"missed\" event.\n     *\n     * @param { (event: KeyMissed) => void } listener\n     *\n     * @return { void }\n     */\n    static onMissed(listener: (event: KeyMissed) => void): void {\n        this.listen('missed', listener);\n    }\n\n    /**\n     * Register a listener on \"writing\" event.\n     *\n     * @param { (event: WritingKey) => void } listener\n     *\n     * @return { void }\n     */\n    static onWriting(listener: (event: WritingKey) => void): void {\n        this.listen('writing', listener);\n    }\n\n    /**\n     * Register a listener on \"written\" event.\n     *\n     * @param { (event: KeyWritten) => void } listener\n     *\n     * @return { void }\n     */\n    static onWritten(listener: (event: KeyWritten) => void): void {\n        this.listen('written', listener);\n    }\n\n    /**\n     * Register a listener on \"failed\" event.\n     *\n     * @param { (event: KeyWriteFailed) => void } listener\n     *\n     * @return { void }\n     */\n    static onWriteFailed(listener: (event: KeyWriteFailed) => void): void {\n        this.listen('write-failed', listener);\n    }\n\n    /**\n     * Register a listener on \"forgot\" event.\n     *\n     * @param { (event: KeyForgotten) => void } listener\n     *\n     * @return { void }\n     */\n    static onForgot(listener: (event: KeyForgotten) => void): void {\n        this.listen('forgot', listener);\n    }\n\n    /**\n     * Register a listener on \"forgot-failed\" event.\n     *\n     * @param { (event: KeyForgotFailed) => void } listener\n     *\n     * @return { void }\n     */\n    static onForgotFailed(listener: (event: KeyForgotFailed) => void): void {\n        this.listen('forgot-failed', listener);\n    }\n\n    /**\n     * Register a listener on \"flushing\" event.\n     *\n     * @param { (event: StorageFlushing) => void } listener\n     *\n     * @return { void }\n     */\n    static onFlushing(listener: (event: StorageFlushing) => void): void {\n        this.listen('flushing', listener);\n    }\n\n    /**\n     * Register a listener on \"flushed\" event.\n     *\n     * @param { (event: StorageFlushed) => void } listener\n     *\n     * @return { void }\n     */\n    static onFlushed(listener: (event: StorageFlushed) => void): void {\n        this.listen('flushed', listener);\n    }\n\n    /**\n     * Emit an event for the Session Storage instance.\n     *\n     * @template { keyof SessionStorageEvents } K\n     *\n     * @param { SessionStorageEvent[K] } event\n     *\n     * @returns { void }\n     */\n    private static emit<K extends keyof SessionStorageEvent>(event: SessionStorageEvent[K]): void {\n        dispatchEvent(event);\n    }\n}"],"names":["SessionStorageFake","constructor","_SessionStorageFake_used","set","this","_SessionStorageFake_quota","__classPrivateFieldSet","space","length","Object","keys","getItem","keyName","setItem","keyValue","value","String","exceeded","throw","removeItem","clear","key","index","_a","__classPrivateFieldGet","size","Blob","DOMException","StorageFlushing","Event","super","_StorageFlushing_key","StorageFlushed","_StorageFlushed_key","RetrievingKey","_RetrievingKey_key","KeyHit","_KeyHit_key","_KeyHit_value","KeyMissed","_KeyMissed_key","KeyWriteFailed","_KeyWriteFailed_key","_KeyWriteFailed_value","KeyWritten","_KeyWritten_key","_KeyWritten_value","WritingKey","_WritingKey_key","_WritingKey_value","KeyForgotten","_KeyForgotten_key","KeyForgotFailed","_KeyForgotFailed_key","SessionStorage","item","data","emit","_SessionStorage_storage","JSON","stringify","_b","get","fallback","storageItem","parse","_c","remember","callback","all","map","remove","has","missing","hasAny","Array","isArray","some","isEmpty","isNotEmpty","count","dump","console","log","fake","restore","sessionStorage","isFake","listen","events","listener","event","entries","addEventListener","once","onRetrieving","onHit","onMissed","onWriting","onWritten","onWriteFailed","onForgot","onForgotFailed","onFlushing","onFlushed","dispatchEvent"],"mappings":"y+BAAaA,EAyBT,WAAAC,GAnBAC,EAAAC,IAAAC,KAAgB,GAOhBC,EAAAF,IAAAC,KAAiB,SAabE,EAAAF,KAAIF,EAASE,KAAKG,YACtB,CAOA,UAAIC,GACA,OAAOC,OAAOC,KAAKN,MAAMI,MAC7B,CASA,OAAAG,CAAQC,GACJ,OAAOR,KAAKQ,IAAY,IAC5B,CAUA,OAAAC,CAAQD,EAAiBE,GACrB,MAAMC,EAAgBC,OAAOF,GAEzBV,KAAKa,SAASL,EAASG,IACvBX,KAAKc,MAAMN,GAGfR,KAAKQ,GAAWG,EAEhBT,EAAAF,KAAIF,EAASE,KAAKG,YACtB,CASA,UAAAY,CAAWP,UACAR,KAAKQ,GAEZN,EAAAF,KAAIF,EAASE,KAAKG,YACtB,CAOA,KAAAa,GACI,IAAK,MAAMC,KAAOZ,OAAOC,KAAKN,aACnBA,KAAKiB,GAGhBf,EAAAF,KAAIF,EAASE,KAAKG,YACtB,CASA,GAAAc,CAAIC,SACA,OAA+B,QAAxBC,EAAAd,OAAOC,KAAKN,MAAMkB,UAAM,IAAAC,EAAAA,EAAI,IACvC,CAOQ,KAAAhB,GACJD,EAAAF,KAAIF,EAAS,EAAC,KAEd,IAAK,MAAMmB,KAAOZ,OAAOC,KAAKN,MAC1BE,EAAAF,KAAAF,EAAAsB,EAAApB,KAAAF,EAAA,KAAcE,KAAKqB,KAAKJ,EAAKjB,KAAKiB,IAAK,KAG3C,OAAOG,EAAApB,KAAIF,EAAA,IACf,CAUQ,IAAAuB,CAAKb,EAAiBE,GAC1B,OAAO,IAAIY,KAAK,CAACd,EAASE,IAAWW,IACzC,CAUQ,QAAAR,CAASL,EAAiBE,GAC9B,OAAOV,KAAKqB,KAAKb,EAASE,GAAYU,EAAApB,KAAIF,EAAA,KAASsB,EAAApB,WACvD,CASQ,MAAMQ,GACV,MAAM,IAAIe,aAAa,mEAAmEf,yBAAgC,qBAC9H,8BC1JE,MAAOgB,UAAwBC,MAWjC,WAAA5B,GACI6B,MAAM,4BANDC,EAAA5B,IAAAC,UAAA,EAOT,CAOA,OAAIiB,GACA,OAAOG,EAAApB,KAAI2B,EAAA,IACf,gBCtBE,MAAOC,UAAuBH,MAWhC,WAAA5B,GACI6B,MAAM,2BANDG,EAAA9B,IAAAC,UAAA,EAOT,CAOA,OAAIiB,GACA,OAAOG,EAAApB,KAAI6B,EAAA,IACf,gBCtBE,MAAOC,UAAsBL,MAa/B,WAAA5B,CAAYoB,GACRS,MAAM,8BARDK,EAAAhC,IAAAC,UAAA,GAULE,EAAAF,KAAI+B,EAAQd,EAAG,IACnB,CAOA,OAAIA,GACA,OAAOG,EAAApB,KAAI+B,EAAA,IACf,gBC1BE,MAAOC,UAAeP,MAqBxB,WAAA5B,CAAYoB,EAAaN,GACrBe,MAAM,uBAhBDO,EAAAlC,IAAAC,UAAA,GAOAkC,EAAAnC,IAAAC,UAAA,GAWLE,EAAAF,KAAIiC,EAAQhB,EAAG,KACff,EAAAF,KAAIkC,EAAUvB,EAAK,IACvB,CAOA,OAAIM,GACA,OAAOG,EAAApB,KAAIiC,EAAA,IACf,CAOA,SAAItB,GACA,OAAOS,EAAApB,KAAIkC,EAAA,IACf,8BC5CE,MAAOC,UAAkBV,MAa3B,WAAA5B,CAAYoB,GACRS,MAAM,0BARDU,EAAArC,IAAAC,UAAA,GAULE,EAAAF,KAAIoC,EAAQnB,EAAG,IACnB,CAOA,OAAIA,GACA,OAAOG,EAAApB,KAAIoC,EAAA,IACf,gBC1BE,MAAOC,UAAuBZ,MAqBhC,WAAA5B,CAAYoB,EAAaN,GACrBe,MAAM,gCAhBDY,EAAAvC,IAAAC,UAAA,GAOAuC,EAAAxC,IAAAC,UAAA,GAWLE,EAAAF,KAAIsC,EAAQrB,EAAG,KACff,EAAAF,KAAIuC,EAAU5B,EAAK,IACvB,CAOA,OAAIM,GACA,OAAOG,EAAApB,KAAIsC,EAAA,IACf,CAOA,SAAI3B,GACA,OAAOS,EAAApB,KAAIuC,EAAA,IACf,8BC5CE,MAAOC,UAAmBf,MAqB5B,WAAA5B,CAAYoB,EAAaN,GACrBe,MAAM,2BAhBDe,EAAA1C,IAAAC,UAAA,GAOA0C,EAAA3C,IAAAC,UAAA,GAWLE,EAAAF,KAAIyC,EAAQxB,EAAG,KACff,EAAAF,KAAI0C,EAAU/B,EAAK,IACvB,CAOA,OAAIM,GACA,OAAOG,EAAApB,KAAIyC,EAAA,IACf,CAOA,SAAI9B,GACA,OAAOS,EAAApB,KAAI0C,EAAA,IACf,8BC5CE,MAAOC,UAAmBlB,MAqB5B,WAAA5B,CAAYoB,EAAaN,GACrBe,MAAM,2BAhBDkB,EAAA7C,IAAAC,UAAA,GAOA6C,EAAA9C,IAAAC,UAAA,GAWLE,EAAAF,KAAI4C,EAAQ3B,EAAG,KACff,EAAAF,KAAI6C,EAAUlC,EAAK,IACvB,CAOA,OAAIM,GACA,OAAOG,EAAApB,KAAI4C,EAAA,IACf,CAOA,SAAIjC,GACA,OAAOS,EAAApB,KAAI6C,EAAA,IACf,8BC5CE,MAAOC,UAAqBrB,MAa9B,WAAA5B,CAAYoB,GACRS,MAAM,0BARDqB,EAAAhD,IAAAC,UAAA,GAULE,EAAAF,KAAI+C,EAAQ9B,EAAG,IACnB,CAOA,OAAIA,GACA,OAAOG,EAAApB,KAAI+C,EAAA,IACf,gBC1BE,MAAOC,UAAwBvB,MAajC,WAAA5B,CAAYoB,GACRS,MAAM,iCARDuB,EAAAlD,IAAAC,UAAA,GAULE,EAAAF,KAAIiD,EAAQhC,EAAG,IACnB,CAOA,OAAIA,GACA,OAAOG,EAAApB,KAAIiD,EAAA,IACf,sBCLSC,EAgBT,UAAOnD,CAAIkB,EAAaN,GACpB,MAAMwC,EAA2B,CAC7BC,KAAuB,mBAAVzC,EAAuBA,IAAUA,GAGlDX,KAAKqD,KAAK,IAAIV,EAAW1B,EAAKkC,EAAKC,OAEnC,IACIhC,EAAApB,KAAImB,EAAA,IAAAmC,GAAU7C,QAAQQ,EAAKsC,KAAKC,UAAUL,IAE1CnD,KAAKqD,KAAK,IAAIb,EAAWvB,EAAKkC,EAAKC,MACvC,CAAE,MAAAK,GAGE,OAFAzD,KAAKqD,KAAK,IAAIhB,EAAepB,EAAKkC,EAAKC,QAEhC,CACX,CAEA,OAAO,CACX,CAUA,UAAOM,CAAIzC,EAAa0C,EAAqC,YACzD3D,KAAKqD,KAAK,IAAIvB,EAAcb,IAE5B,MAAM2C,EAA6BxC,EAAApB,KAAImB,EAAA,IAAAmC,GAAU/C,QAAQU,GAEzD,GAAoB,OAAhB2C,EAGA,OAFA5D,KAAKqD,KAAK,IAAIlB,EAAUlB,IAEG,mBAAb0C,EAA0BA,IAAaA,EAGzD,IAAIhD,EAEJ,IACI,MAAMwC,EAA2BI,KAAKM,MAAMD,GAE5CjD,EAAiB,QAAT8C,EAAAN,EAAKC,YAAI,IAAAK,EAAAA,EAAIN,CACzB,CAAE,MAAAW,GACEnD,EAAQiD,CACZ,CAIA,OAFA5D,KAAKqD,KAAK,IAAIrB,EAAOf,EAAKN,IAEnBA,CACX,CAUA,eAAOoD,CAAS9C,EAAa+C,GACzB,MAAMb,EAAsBnD,KAAK0D,IAAIzC,GAMrC,OAJa,OAATkC,GACAnD,KAAKD,IAAIkB,EAAK+C,GAGXb,QAAAA,EAAQnD,KAAK0D,IAAIzC,EAC5B,CAOA,UAAOgD,GACH,OAAOjE,KAAKM,OAAO4D,IAAKjD,IACb,CAAEA,MAAKN,MAAOX,KAAK0D,IAAIzC,KAEtC,CASA,aAAOkD,CAAOlD,GACV,OAAIjB,KAAKoE,IAAInD,IACTG,EAAApB,KAAImB,EAAA,IAAAmC,GAAUvC,WAAWE,GAEzBjB,KAAKqD,KAAK,IAAIP,EAAa7B,KAEpB,IAEPjB,KAAKqD,KAAK,IAAIL,EAAgB/B,KAEvB,EAEf,CAOA,YAAOD,GACHhB,KAAKqD,KAAK,IAAI7B,GAEdJ,EAAApB,KAAImB,EAAA,IAAAmC,GAAUtC,QAEdhB,KAAKqD,KAAK,IAAIzB,EAClB,CASA,UAAOwC,CAAInD,GACP,QAASjB,KAAK0D,IAAIzC,EACtB,CASA,cAAOoD,CAAQpD,GACX,OAAQjB,KAAKoE,IAAInD,EACrB,CASA,aAAOqD,IAAUhE,GASb,OARoB,IAAhBA,EAAKF,SAEDE,EADAiE,MAAMC,QAAQlE,EAAK,IACZA,EAAK,GAEL,CAACA,EAAK,KAIdA,EAAKmE,KAAMxD,GAAyBjB,KAAKoE,IAAInD,GACxD,CAOA,cAAOyD,GACH,OAAgC,IAAzBtD,EAAApB,KAAImB,EAAA,IAAAmC,GAAUlD,MACzB,CAOA,iBAAOuE,GACH,OAAQ3E,KAAK0E,SACjB,CAOA,WAAOpE,GACH,OAAOD,OAAOC,KAAKc,EAAApB,KAAImB,EAAA,IAAAmC,GAC3B,CAOA,YAAOsB,GACH,OAAOxD,EAAApB,KAAImB,EAAA,IAAAmC,GAAUlD,MACzB,CAOA,WAAOyE,CAAK5D,GACR6D,QAAQC,IAAI/E,KAAK0D,IAAIzC,GACzB,CAQA,WAAO+D,GACH9E,EAAAF,KAAImB,EAAY,IAAIvB,QACxB,CAOA,cAAOqF,GACH/E,EAAAF,KAAImB,EAAY+D,eAAc,IAAA5B,EAClC,CAOA,aAAO6B,GACH,OAAO/D,EAAApB,KAAImB,EAAA,IAAAmC,aAAqB1D,CACpC,CAuBA,aAAOwF,CAA4CC,EAA0DC,EAAkD,MAC3JD,EAA2B,iBAAXA,EAAsB,CAAEA,CAACA,GAASC,GAAaD,EAE/D,IAAK,MAAOE,EAAOD,KAAajF,OAAOmF,QAAQH,GAC3CI,iBAAiB,mBAAmBF,IAASD,EAA2B,CAAEI,MAAM,GAExF,CASA,mBAAOC,CAAaL,GAChBtF,KAAKoF,OAAO,aAAcE,EAC9B,CASA,YAAOM,CAAMN,GACTtF,KAAKoF,OAAO,MAAOE,EACvB,CASA,eAAOO,CAASP,GACZtF,KAAKoF,OAAO,SAAUE,EAC1B,CASA,gBAAOQ,CAAUR,GACbtF,KAAKoF,OAAO,UAAWE,EAC3B,CASA,gBAAOS,CAAUT,GACbtF,KAAKoF,OAAO,UAAWE,EAC3B,CASA,oBAAOU,CAAcV,GACjBtF,KAAKoF,OAAO,eAAgBE,EAChC,CASA,eAAOW,CAASX,GACZtF,KAAKoF,OAAO,SAAUE,EAC1B,CASA,qBAAOY,CAAeZ,GAClBtF,KAAKoF,OAAO,gBAAiBE,EACjC,CASA,iBAAOa,CAAWb,GACdtF,KAAKoF,OAAO,WAAYE,EAC5B,CASA,gBAAOc,CAAUd,GACbtF,KAAKoF,OAAO,UAAWE,EAC3B,CAWQ,WAAOjC,CAA0CkC,GACrDc,cAAcd,EAClB,MAvYOjC,EAAA,CAAA3C,MAAoBuE"}