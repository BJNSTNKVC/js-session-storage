{"version":3,"file":"main.esm.js","sources":["../src/main.ts"],"sourcesContent":["export type SessionStorageItem = {\n    data: any,\n};\n\nexport class SessionStorage {\n    /**\n     * Current Storage instance.\n     *\n     * @type { Storage }\n     */\n    static #storage: Storage = sessionStorage;\n\n    /**\n     * Set the key to the Storage object.\n     *\n     * @param { string } key String containing the name of the key you want to create.\n     * @param { * } value String containing the value of the key you want to create.\n     */\n    static set(key: string, value: any): void {\n        const item: SessionStorageItem = {\n            data: typeof value === 'function' ? value() : value,\n        };\n\n        this.#storage.setItem(key, JSON.stringify(item));\n    }\n\n    /**\n     * Get the key from the Storage object.\n     *\n     * @param { string } key String containing the name of the key you want to create.\n     * @param { string | Function | null } fallback String containing the fallback value.\n     *\n     * @return { * }\n     */\n    static get(key: string, fallback: string | Function | null = null): any {\n        const storageItem: string | null = this.#storage.getItem(key);\n\n        if (storageItem === null) {\n            return typeof fallback === 'function' ? fallback() : fallback;\n        }\n\n        try {\n            const item: SessionStorageItem = JSON.parse(storageItem);\n\n            return item.data ?? item;\n        } catch {\n            return storageItem;\n        }\n    }\n\n    /**\n     * Get the key from the Storage, or execute the given callback and store the result.\n     *\n     * @param { string } key String containing the name of the key you want to create.\n     * @param { Function } callback Function you want to execute.\n     *\n     * @return { any }\n     */\n    static remember(key: string, callback: Function): any {\n        const item: string | null = this.get(key);\n\n        if (item === null) {\n            this.set(key, callback);\n        }\n\n        return item ?? this.get(key);\n    }\n\n    /**\n     * Retrieves all items from the Storage object.\n     *\n     * @return { { key: string, value: any }[] }\n     */\n    static all(): { key: string, value: any }[] {\n        return this.keys().map((key: string): { key: string, value: any } => {\n            return { key, value: this.get(key) };\n        });\n    }\n\n    /**\n     * Remove the key from the Storage object.\n     *\n     * @param { string } key String containing the name of the key you want to delete.\n     */\n    static remove(key: string): void {\n        this.#storage.removeItem(key);\n    }\n\n    /**\n     * Clear all keys stored in a given Storage object.\n     */\n    static clear(): void {\n        this.#storage.clear();\n    }\n\n    /**\n     * Determine if the key exists in the Storage object.\n     *\n     * @param { string } key String containing the name of the key you want to check against\n     *\n     * @return { boolean }\n     */\n    static has(key: string): boolean {\n        return !!this.get(key);\n    }\n\n    /**\n     * Determine if any of the keys exists in the Storage object.\n     *\n     * @param { string | string[] } keys String containing the name of the key you want to check against\n     *\n     * @return { boolean }\n     */\n    static hasAny(...keys: [string | string[]] | string[]): boolean {\n        if (keys.length === 1) {\n            if (Array.isArray(keys[0])) {\n                keys = keys[0];\n            } else {\n                keys = [keys[0]];\n            }\n        }\n\n        return keys.some((key: string): boolean => this.has(key));\n    }\n\n    /**\n     * Determine if the Storage object is empty.\n     *\n     * @return { boolean }\n     */\n    static isEmpty(): boolean {\n        return this.#storage.length === 0;\n    }\n\n    /**\n     * Determine if the Storage object is not empty.\n     *\n     * @return { boolean }\n     */\n    static isNotEmpty(): boolean {\n        return !this.isEmpty();\n    }\n\n    /**\n     * Retrieves all keys from the Storage object.\n     *\n     * @return { string[] }\n     */\n    static keys(): string[] {\n        return Object.keys(this.#storage);\n    }\n\n    /**\n     * Returns the total number of items in the Storage object.\n     *\n     * @return { number }\n     */\n    static count(): number {\n        return this.#storage.length;\n    }\n\n    /**\n     * Dump the key from the Storage object.\n     *\n     * @param { string } key String containing the name of the key you want to dump.\n     */\n    static dump(key: string): void {\n        console.log(this.get(key));\n    }\n\n\n    /**\n     * Replace the Session Storage instance with a fake.\n     *\n     * @return { void }\n     */\n    static fake(): void {\n        this.#storage = new SessionStorageFake();\n    }\n\n    /**\n     * Restore the Session Storage instance.\n     *\n     * @return { void }\n     */\n    static restore(): void {\n        this.#storage = sessionStorage;\n    }\n\n    /**\n     * Determines whether a \"fake\" has been set as the Session Storage instance.\n     *\n     * @return { boolean }\n     */\n    static isFake(): boolean {\n        return this.#storage instanceof SessionStorageFake;\n    }\n}\n\nexport class SessionStorageFake implements Storage {\n    /**\n     * Storage property.\n     *\n     * @type { string }\n     */\n    [key: string]: any;\n\n    /**\n     * Returns an integer representing the number of data items stored in the Storage object.\n     *\n     * @return { number }\n     */\n    get length(): number {\n        return Object.keys(this).length;\n    }\n\n    /**\n     * When passed a key name, will return that key's value.\n     *\n     * @param { string } keyName\n     *\n     * @return { any }\n     */\n    getItem(keyName: string): string {\n        return this[keyName] || null;\n    }\n\n    /**\n     * When passed a key name and value, will add that key to the storage, or update that key's value if it already exists.\n     *\n     * @param { string } keyName\n     * @param { string } keyValue\n     *\n     * @return { void }\n     */\n    setItem(keyName: string, keyValue: string): void {\n        this[keyName] = keyValue;\n    }\n\n    /**\n     * When passed a key name, will remove that key from the storage.\n     *\n     * @param { string } keyName\n     *\n     * @return { void }\n     */\n    removeItem(keyName: string): void {\n        delete this[keyName];\n    }\n\n    /**\n     * When invoked, will empty all keys out of the storage.\n     *\n     * @return { void }\n     */\n    clear(): void {\n        for (const key of Object.keys(this)) {\n            delete this[key];\n        }\n    }\n\n    /**\n     * When passed a number n, returns the name of the nth key in a given Storage object.\n     *\n     * @param { number } index\n     *\n     * @return { string | null }\n     */\n    key(index: number): string | null {\n        return Object.keys(this)[index] ?? null;\n    }\n}\n\nif (typeof window !== 'undefined') {\n    (window as any).SessionStorage = SessionStorage;\n    (window as any).SessionStorageFake = SessionStorageFake;\n}\n\nif (typeof global !== 'undefined') {\n    (global as any).SessionStorage = SessionStorage;\n    (global as any).SessionStorageFake = SessionStorageFake;\n}"],"names":[],"mappings":"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"}